<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Rugby Tropical Cup 2023</title>
</head>
<body>
    <header>
        <img src="logo_horizontal.svg" alt="Rugby Tropical Cup Logo">
        <h1>Scanneur de billets</h1>
    </header>
    <input type="file" id="file-selector">
    <b> QR code détecté: </b>
    <span id="file-qr-result">None</span>

    <script src="qr-scanner.umd.min.js"></script>
    <scrpit src="app.js"></scrpit>
    <script>

        const fileSelector = document.getElementById('file-selector');
        const fileQrResult = document.getElementById('file-qr-result');

        function setResult(label, result) {
            console.log(result.data);
            label.textContent = result.data;
            label.style.color = 'teal';
            clearTimeout(label.highlightTimeout);
            label.highlightTimeout = setTimeout(() => label.style.color = 'inherit', 100);
        }


        // ####### File Scanning #######

        fileSelector.addEventListener('change', event => {
            const file = fileSelector.files[0];
            if (!file) {
                return;
            }
            QrScanner.scanImage(file, { returnDetailedScanResult: true })
                .then(result => setResult(fileQrResult, result))
                .catch(e => setResult(fileQrResult, { data: e || 'No QR code found.' }));
        });
    </script>

</div>
</body>
</html>
